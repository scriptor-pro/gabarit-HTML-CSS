<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DIY CSS</title>
  <meta name="description" content="Page de test listant un grand nombre d‚Äô√©l√©ments HTML, pour v√©rifier styles, accessibilit√© et rendu." />
  <link rel="preconnect" href="https://fonts.bunny.net" />
  <link rel="stylesheet" href="https://fonts.bunny.net/css?family=literata:400,600,700&display=swap" />
  <link id="font-ui-link" rel="stylesheet" href="https://fonts.bunny.net/css?family=inter:100,200,300,400,500,600,700,800,900&display=swap" />
  <link id="font-content-link" rel="stylesheet" href="https://fonts.bunny.net/css?family=source-serif-4:100,200,300,400,500,600,700,800,900&display=swap" />
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <a class="skip-link" href="#main">Aller au contenu</a>

  <header>
    <h1>DIY CSS</h1>
    <p>Objectif : instancier beaucoup d‚Äô√©l√©ments pour pouvoir leur appliquer des styles et tester le rendu.</p>

    <form class="font-controls" aria-label="Choix des polices">
      <fieldset>
        <legend>Interface</legend>
        <p>
          <label for="ui-font-search">Recherche catalogue Bunny</label>
          <input id="ui-font-search" name="ui-font-search" type="search" placeholder="Ex: inter, garamond, serif..." autocomplete="off" list="ui-font-suggestions" />
        </p>
        <datalist id="ui-font-suggestions"></datalist>
        <p class="font-active" id="ui-font-active" aria-live="polite">Police active: Inter (700)</p>
        <p hidden>
          <label for="ui-font-family">Police</label>
          <select id="ui-font-family" name="ui-font-family">
            <optgroup label="Sans serif">
              <option value="inter" data-name="Inter" data-class="sans" selected>Inter</option>
              <option value="open-sans" data-name="Open Sans" data-class="sans">Open Sans</option>
              <option value="nunito-sans" data-name="Nunito Sans" data-class="sans">Nunito Sans</option>
              <option value="work-sans" data-name="Work Sans" data-class="sans">Work Sans</option>
              <option value="dm-sans" data-name="DM Sans" data-class="sans">DM Sans</option>
              <option value="rubik" data-name="Rubik" data-class="sans">Rubik</option>
              <option value="roboto" data-name="Roboto" data-class="sans">Roboto</option>
              <option value="lato" data-name="Lato" data-class="sans">Lato</option>
              <option value="fira-sans" data-name="Fira Sans" data-class="sans">Fira Sans</option>
              <option value="source-sans-3" data-name="Source Sans 3" data-class="sans">Source Sans 3</option>
            </optgroup>
            <optgroup label="Serif">
              <option value="source-serif-4" data-name="Source Serif 4" data-class="serif">Source Serif 4</option>
              <option value="lora" data-name="Lora" data-class="serif">Lora</option>
              <option value="merriweather" data-name="Merriweather" data-class="serif">Merriweather</option>
              <option value="pt-serif" data-name="PT Serif" data-class="serif">PT Serif</option>
              <option value="crimson-text" data-name="Crimson Text" data-class="serif">Crimson Text</option>
              <option value="libre-baskerville" data-name="Libre Baskerville" data-class="serif">Libre Baskerville</option>
              <option value="bitter" data-name="Bitter" data-class="serif">Bitter</option>
              <option value="vollkorn" data-name="Vollkorn" data-class="serif">Vollkorn</option>
              <option value="cormorant-garamond" data-name="Cormorant Garamond" data-class="serif">Cormorant Garamond</option>
              <option value="eb-garamond" data-name="EB Garamond" data-class="serif">EB Garamond</option>
            </optgroup>
          </select>
        </p>
        <p>
          <label for="ui-font-weight">Poids</label>
          <select id="ui-font-weight" name="ui-font-weight">
            <option value="100">100</option>
            <option value="200">200</option>
            <option value="300">300</option>
            <option value="400">400</option>
            <option value="500">500</option>
            <option value="600">600</option>
            <option value="700" selected>700</option>
            <option value="800">800</option>
            <option value="900">900</option>
          </select>
        </p>
      </fieldset>
      <fieldset>
        <legend>Contenu</legend>
        <p>
          <label for="content-font-search">Recherche catalogue Bunny</label>
          <input id="content-font-search" name="content-font-search" type="search" placeholder="Ex: merriweather, sans..." autocomplete="off" list="content-font-suggestions" />
        </p>
        <datalist id="content-font-suggestions"></datalist>
        <p class="font-active" id="content-font-active" aria-live="polite">Police active: Source Serif 4 (400)</p>
        <p hidden>
          <label for="content-font-family">Police</label>
          <select id="content-font-family" name="content-font-family">
            <optgroup label="Serif">
              <option value="source-serif-4" data-name="Source Serif 4" data-class="serif" selected>Source Serif 4</option>
              <option value="lora" data-name="Lora" data-class="serif">Lora</option>
              <option value="merriweather" data-name="Merriweather" data-class="serif">Merriweather</option>
              <option value="pt-serif" data-name="PT Serif" data-class="serif">PT Serif</option>
              <option value="crimson-text" data-name="Crimson Text" data-class="serif">Crimson Text</option>
              <option value="libre-baskerville" data-name="Libre Baskerville" data-class="serif">Libre Baskerville</option>
              <option value="bitter" data-name="Bitter" data-class="serif">Bitter</option>
              <option value="vollkorn" data-name="Vollkorn" data-class="serif">Vollkorn</option>
              <option value="cormorant-garamond" data-name="Cormorant Garamond" data-class="serif">Cormorant Garamond</option>
              <option value="eb-garamond" data-name="EB Garamond" data-class="serif">EB Garamond</option>
            </optgroup>
            <optgroup label="Sans serif">
              <option value="inter" data-name="Inter" data-class="sans">Inter</option>
              <option value="open-sans" data-name="Open Sans" data-class="sans">Open Sans</option>
              <option value="nunito-sans" data-name="Nunito Sans" data-class="sans">Nunito Sans</option>
              <option value="work-sans" data-name="Work Sans" data-class="sans">Work Sans</option>
              <option value="dm-sans" data-name="DM Sans" data-class="sans">DM Sans</option>
              <option value="rubik" data-name="Rubik" data-class="sans">Rubik</option>
              <option value="roboto" data-name="Roboto" data-class="sans">Roboto</option>
              <option value="lato" data-name="Lato" data-class="sans">Lato</option>
              <option value="fira-sans" data-name="Fira Sans" data-class="sans">Fira Sans</option>
              <option value="source-sans-3" data-name="Source Sans 3" data-class="sans">Source Sans 3</option>
            </optgroup>
          </select>
        </p>
        <p>
          <label for="content-font-weight">Poids</label>
          <select id="content-font-weight" name="content-font-weight">
            <option value="100">100</option>
            <option value="200">200</option>
            <option value="300">300</option>
            <option value="400" selected>400</option>
            <option value="500">500</option>
            <option value="600">600</option>
            <option value="700">700</option>
            <option value="800">800</option>
            <option value="900">900</option>
          </select>
        </p>
      </fieldset>
      <fieldset>
        <legend>Direction esthetique</legend>
        <p>
          <label for="aesthetic-preset">Preset visuel</label>
          <select id="aesthetic-preset" name="aesthetic-preset">
            <option value="neutral">Vanilla neutre - base sobre et polyvalente</option>
            <option value="editorial-soft">Editorial doux - contraste modere, lecture longue</option>
            <option value="brutalist-bw">Brutaliste N/B - frontal, contraste fort</option>
            <option value="bauhaus-functional">Bauhaus fonctionnel - geometrique et utilitaire</option>
            <option value="nordic-calm">Nordique calme - froid, aerien, discret</option>
            <option value="newspaper-classic">Presse classique - encre + papier</option>
            <option value="terminal-mono">Terminal mono - technique, faible saturation</option>
            <option value="warm-paper">Papier chaud - ton creme, ambiance douce</option>
            <option value="oceanic-clean">Ocean propre - bleu propre et lisible</option>
            <option value="forest-muted">Foret mutee - vert grise, naturel</option>
            <option value="sunset-soft">Coucher doux - accents chauds, fond clair</option>
            <option value="high-contrast">Haute lisibilite - separation maximale</option>
            <option value="retro-console">Retro console - contraste vintage numerique</option>
            <option value="museum-mineral">Musee mineral - pierre froide et sobre</option>
            <option value="coffee-house">Coffee house - brun chaud, confortable</option>
            <option value="neon-night">Neon night - accents vifs sur fond sombre</option>
            <option value="pastel-lab">Pastel lab - doux, clair, pedagogique</option>
            <option value="corporate-blue">Corporate blue - institutionnel, net</option>
            <option value="mono-ink">Mono ink - monochrome editorial</option>
            <option value="amber-ice">Amber ice - ambre chaud et bleus froids</option>
            <option value="terracotta-mist">Terracotta mist - terre cuite et brume froide</option>
            <option value="copper-lagoon">Copper lagoon - cuivre chaud et lagon frais</option>
            <option value="sun-slate">Sun slate - soleil doux et ardoise froide</option>
            <option value="peach-fjord">Peach fjord - peche chaude et fjord bleute</option>
            <option value="spice-glacier">Spice glacier - epices douces et glacier net</option>
            <option value="canyon-breeze">Canyon breeze - canyon chaud et souffle oceane</option>
          </select>
        </p>
      </fieldset>
      <fieldset class="fieldset-colors">
        <legend>Couleurs</legend>
        <div class="color-controls">
          <p>
            <label for="color-accent">Accent</label>
            <input id="color-accent" name="color-accent" type="color" value="#3b63d1" />
            <small class="token-help">Couleur d'accent (liens, focus, accents UI).</small>
          </p>
          <p>
            <label for="color-bg">Fond</label>
            <input id="color-bg" name="color-bg" type="color" value="#f6f6f6" />
            <small class="token-help">Fond global de la page.</small>
          </p>
          <p>
            <label for="color-surface">Surface</label>
            <input id="color-surface" name="color-surface" type="color" value="#ffffff" />
            <small class="token-help">Fond des cartes et blocs principaux.</small>
          </p>
          <p>
            <label for="color-surface-alt">Surface alt</label>
            <input id="color-surface-alt" name="color-surface-alt" type="color" value="#fafafa" />
            <small class="token-help">Variante de surface pour zones secondaires.</small>
          </p>
          <p>
            <label for="color-ink">Texte</label>
            <input id="color-ink" name="color-ink" type="color" value="#1f1f1f" />
            <small class="token-help">Couleur principale du texte.</small>
          </p>
          <p>
            <label for="color-ink-soft">Texte secondaire</label>
            <input id="color-ink-soft" name="color-ink-soft" type="color" value="#595959" />
            <small class="token-help">Texte meta, aides, contenus secondaires.</small>
          </p>
          <p>
            <label for="color-line">Bordure</label>
            <input id="color-line" name="color-line" type="color" value="#d4d4d4" />
            <small class="token-help">Bordures standards et separateurs.</small>
          </p>
          <p>
            <label for="color-line-strong">Bordure forte</label>
            <input id="color-line-strong" name="color-line-strong" type="color" value="#b8b8b8" />
            <small class="token-help">Bordures renforcees / contraste fort.</small>
          </p>
          <p class="color-reset-wrap">
            <button type="button" id="color-reset">Reinitialiser couleurs</button>
          </p>
        </div>
      </fieldset>
      <fieldset class="fieldset-typography">
        <legend>Voix typographique</legend>
        <div class="token-controls">
          <p>
            <label for="token-font-ui">--font-ui</label>
            <input id="token-font-ui" name="token-font-ui" type="text" value='"Inter", "Segoe UI", Arial, sans-serif' />
            <small class="token-help">Pile de police interface (titres, labels, boutons).</small>
          </p>
          <p>
            <label for="token-font-ui-weight">--font-ui-weight</label>
            <input id="token-font-ui-weight" name="token-font-ui-weight" type="number" min="100" max="900" step="100" value="700" />
            <small class="token-help">Poids principal de la typo interface.</small>
          </p>
          <p>
            <label for="token-font-content">--font-content</label>
            <input id="token-font-content" name="token-font-content" type="text" value='"Source Serif 4", Georgia, serif' />
            <small class="token-help">Pile de police contenu (paragraphes, listes, citations).</small>
          </p>
          <p>
            <label for="token-font-content-weight">--font-content-weight</label>
            <input id="token-font-content-weight" name="token-font-content-weight" type="number" min="100" max="900" step="100" value="400" />
            <small class="token-help">Poids principal de la typo de lecture.</small>
          </p>
          <p>
            <label for="token-line-height">--content-line-height</label>
            <input id="token-line-height" name="token-line-height" type="number" min="1" max="2.4" step="0.001" value="1.618" />
            <small class="token-help">Hauteur de ligne du contenu texte.</small>
          </p>
          <p>
            <label for="token-letter-spacing">--content-letter-spacing (em)</label>
            <input id="token-letter-spacing" name="token-letter-spacing" type="number" min="-0.02" max="0.2" step="0.001" value="0.008" />
            <small class="token-help">Espace moyen entre les lettres (em).</small>
          </p>
          <p>
            <label for="token-word-spacing">--content-word-spacing (em)</label>
            <input id="token-word-spacing" name="token-word-spacing" type="number" min="-0.05" max="0.4" step="0.001" value="0.03" />
            <small class="token-help">Espace moyen entre les mots (em).</small>
          </p>
          <p class="token-apply-wrap">
            <button type="button" id="apply-typography-tokens">Appliquer voix typographique</button>
          </p>
        </div>
      </fieldset>
      <p class="font-controls-actions">
        <button type="button" id="apply-fonts">Reappliquer les polices</button>
        <button type="button" id="reset-fonts">Polices par defaut</button>
        <button type="button" id="reset-all-tokens">Reinitialiser tous les tokens</button>
        <button type="button" id="theme-toggle" aria-pressed="false">Passer en mode fonce</button>
        <button type="button" id="export-current-theme">Exporter theme courant</button>
      </p>
      <p class="font-controls-help">
        Autocomplete actif a partir de 5 caracteres. L'application est automatique; le bouton reste optionnel.
      </p>
      <p class="font-catalog-status" id="font-catalog-status" role="status" aria-live="polite">
        Chargement du catalogue Bunny...
      </p>
    </form>

    <nav aria-label="Navigation principale">
      <ul>
        <li><a href="#text">Texte</a></li>
        <li><a href="#media">M√©dia</a></li>
        <li><a href="#forms">Formulaires</a></li>
        <li><a href="#tables">Tableaux</a></li>
        <li><a href="#interactive">Interactif</a></li>
        <li><a href="#embedded">Embarqu√©</a></li>
      </ul>
    </nav>
  </header>

  <main id="main">
    <section id="text">
      <header>
        <h2>Texte, structure, s√©mantique</h2>
      </header>

      <article>
        <header>
          <h3>Article + headings</h3>
          <p><time datetime="2025-12-23">23-12-2025</time> ‚Äî <address>Par Baudouin (exemple)</address></p>
        </header>

        <p>Strong<br><strong>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</strong></p>
        <p>Em<br><em>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</em></p>
        <p>B<br><b>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</b></p>
        <p>I<br><i>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</i></p>
        <p>U<br><u>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</u></p>
        <p>S<br><s>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</s></p>
        <p>Mark<br><mark>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</mark></p>
        <p>Small<br><small>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</small></p>
        <p>Sub (H2O)<br>Lorem H<sub>2</sub>O ipsum dolor sit amet, consectetur adipiscing elit.</p>
        <p>Sup (2^10)<br>Lorem 2<sup>10</sup> ipsum dolor sit amet, consectetur adipiscing elit.</p>
        <p>Abbr (WWW)<br><abbr title="World Wide Web">WWW</abbr> Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
        <p>Dfn<br><dfn>D√©finition</dfn> : lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
        <p>Q (citation courte)<br><q cite="https://example.com">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</q></p>

<h4>Paragraphe</h4>

<p>Aliquam ultrices quis lorem quis aliquam. Etiam et est et risus lobortis tincidunt. Cras placerat <abbr title="tempus">‚ìò</abbr> mattis. Etiam lacinia orci et scelerisque rhoncus. Nunc accumsan turpis eu rhoncus aliquet. Proin volutpat nibh dui, eget congue urna ornare at. Integer ac porta nibh. Vestibulum suscipit sapien a ullamcorper dapibus. Suspendisse hendrerit, nisi et luctus efficitur, purus nibh malesuada tortor, vel dictum tortor lorem vel purus. Morbi laoreet, est in luctus interdum, odio sapien sollicitudin lorem, eget scelerisque quam magna a mi. Nam ut tortor vulputate, fermentum nisl sit amet, tempor ligula. Duis iaculis tristique arcu luctus ultricies. Donec eu turpis bibendum, aliquam nisl non, euismod odio. Aenean eu purus ipsum. Vestibulum nulla lectus, placerat euismod urna non, auctor aliquam ipsum. Mauris leo enim, pulvinar vel diam ut, rutrum facilisis diam. </p>

        <p>
          <a href="https://example.com" rel="noopener">Lien</a>,
          <span>span</span>,
          <wbr> (wbr) pour c√©sure.
        </p>

        <p>
          <code>code</code>, <kbd>kbd</kbd>, <samp>samp</samp>, <var>var</var>.
        </p>

        <pre><code>pre + code
function hello() { return "world"; }</code></pre>

        <blockquote cite="https://example.com">
          <p>blockquote : citation longue. Sed sollicitudin orci id consequat accumsan. Pellentesque suscipit enim vel odio lacinia porttitor. Ut libero nibh, rhoncus nec aliquam sit amet, elementum vel nulla. Aliquam erat volutpat. Nunc commodo, tortor quis posuere eleifend, ante augue venenatis leo, in posuere orci tortor non lectus. Aliquam aliquam nec orci id mattis. Duis at dignissim tortor, sed accumsan ipsum. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Suspendisse varius, mi vitae facilisis fringilla, lectus quam sodales risus, id tincidunt lorem ante sit amet tortor. Donec commodo metus eu rhoncus cursus. Vestibulum sagittis ante sed est blandit, sit amet aliquam erat imperdiet. Phasellus ullamcorper ex eros, sed feugiat lorem lacinia et.  </p>
        </blockquote>

        <p>Rupture th√©matique :</p>
        <hr />

        <p>Retour √† la ligne explicite<br />avec br.</p>

        <p>
          <cite>cite</cite> et <data value="42">data</data>.
        </p>

        <p>
          <bdi>BDI</bdi> ‚Äî <bdo dir="rtl">BDO RTL</bdo>.
        </p>

        <p>
          <ruby>Êº¢<rt>kan</rt></ruby>
          <ruby>Â≠ó<rp>(</rp><rt>ji</rt><rp>)</rp></ruby>
        </p>

        <p>
          <del datetime="2025-12-01">del</del>
          <ins datetime="2025-12-02">ins</ins>
        </p>

        <details>
          <summary>details / summary</summary>
          <p>Contenu repliable.</p>
        </details>

        <figure>
          <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='320' height='180'%3E%3Crect width='100%25' height='100%25' fill='%23ddd'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-family='sans-serif' font-size='16'%3EImage placeholder%3C/text%3E%3C/svg%3E"
               alt="Image de test (placeholder)" width="320" height="180" />
          <figcaption>figure + figcaption</figcaption>
        </figure>

        <ul>
          <li>ul / li</li>
          <li>Deuxi√®me item</li>
        </ul>

        <ol>
          <li>ol / li</li>
          <li>Deuxi√®me item</li>
        </ol>

        <dl>
          <dt>dt</dt>
          <dd>dd</dd>
        </dl>

        <p>Texte ‚Äúmonospace‚Äù:</p>
        <tt>tt (obsol√®te historiquement, mais certains navigateurs le supportent encore ‚Äî √† √©viter en prod)</tt>

        <footer>
          <p>Footer d‚Äôarticle.</p>
        </footer>
      </article>

      <aside class="aside-demo" aria-label="Exemple de contenu annexe">
        <h3>aside</h3>
        <p class="main-copy"><strong>Texte principal (normal) :</strong> Ce paragraphe est le fil principal de lecture de la page.</p>
        <p class="aside-copy"><strong>Texte d‚Äôaside :</strong> Ce bloc apporte un contexte annexe (note, pr√©cision, encart) sans faire partie du contenu principal.</p>
      </aside>
    </section>

    <section id="media">
      <h2>M√©dia</h2>

      <p>picture / source / img :</p>
      <picture>
        <source media="(min-width: 800px)" srcset="https://picsum.photos/seed/picsum/200/323" />
        <img src="https://picsum.photos/seed/picsum/200/323"
             alt="Exemple picture" width="200" height="323" />
      </picture>

      <p>audio :</p>
      <p><strong>Titre :</strong> F√ºr Elise ‚Äî Ludwig van Beethoven (enregistrement libre)</p>
      <audio controls>
        <source src="https://commons.wikimedia.org/wiki/Special:FilePath/Fur-elise-beethoven-216331.ogg" type="audio/ogg" />
        Votre navigateur ne supporte pas audio.
      </audio>

      <p>video :</p>
      <p><strong>Titre :</strong> Big Buck Bunny (Blender Open Movie)</p>
      <p><strong>Licence :</strong> Creative Commons CC BY 3.0</p>
      <video controls width="320">
        <source src="https://download.blender.org/peach/bigbuckbunny_movies/BigBuckBunny_320x180.mp4" type="video/mp4" />
        Votre navigateur ne supporte pas video.
      </video>

      <p>track (exemple, vide) :</p>
      <video controls width="320">
        <source src="" type="video/mp4" />
        <track kind="captions" srclang="fr" label="Fran√ßais" default />
      </video>

      <p>canvas :</p>
      <canvas width="320" height="120">Canvas fallback.</canvas>

      <p>svg inline :</p>
      <svg width="320" height="80" role="img" aria-label="SVG de test">
        <rect x="0" y="0" width="320" height="80" />
        <text x="12" y="50">SVG inline</text>
      </svg>
    </section>

    <section id="forms">
      <h2>Formulaires</h2>

      <p>Exemple de formulaire avec hi√©rarchie claire, libell√©s explicites et zones d‚Äôaction distinctes.</p>

      <form class="demo-form" action="#" method="post">
        <fieldset>
          <legend>Informations principales</legend>
          <div class="form-grid">
            <p>
              <label for="t1">Nom complet</label>
              <input id="t1" name="t1" type="text" autocomplete="name" placeholder="Ex: Alice Martin" />
            </p>

            <p>
              <label for="t2">Email</label>
              <input id="t2" name="t2" type="email" autocomplete="email" placeholder="nom@exemple.fr" />
            </p>

            <p>
              <label for="t3">Mot de passe</label>
              <input id="t3" name="t3" type="password" />
            </p>

            <p>
              <label for="t4">Quantit√©</label>
              <input id="t4" name="t4" type="number" min="0" max="10" />
            </p>

            <p>
              <label for="t5">Date</label>
              <input id="t5" name="t5" type="date" />
            </p>

            <p>
              <label for="t6">Heure</label>
              <input id="t6" name="t6" type="time" />
            </p>
          </div>
        </fieldset>

        <fieldset>
          <legend>Pr√©f√©rences</legend>
          <div class="form-grid">
            <p>
              <label for="t7">Couleur</label>
              <input id="t7" name="t7" type="color" value="#3366ff" />
            </p>

            <p>
              <label for="t8">Intensit√©</label>
              <input id="t8" name="t8" type="range" min="0" max="100" />
            </p>

            <p>
              <label for="t10">S√©lection</label>
              <select id="t10" name="t10">
                <optgroup label="Groupe A">
                  <option>Option 1</option>
                  <option>Option 2</option>
                </optgroup>
                <optgroup label="Groupe B">
                  <option>Option 3</option>
                </optgroup>
              </select>
            </p>

            <p>
              <label for="t11">Recherche rapide (datalist)</label>
              <input id="t11" name="t11" list="dl1" placeholder="Alpha, Beta..." />
              <datalist id="dl1">
                <option value="Alpha"></option>
                <option value="Beta"></option>
                <option value="Gamma"></option>
              </datalist>
            </p>

            <p class="form-grid-wide">
              <label for="t9">Message</label>
              <textarea id="t9" name="t9" rows="3" placeholder="Ajoute un commentaire..."></textarea>
            </p>
          </div>

          <p class="form-inline-options">
            <span>Choix :</span>
            <input id="c1" name="c1" type="checkbox" />
            <label for="c1">Accepter les conditions</label>
            <input id="r1" name="rg" type="radio" />
            <label for="r1">Option A</label>
            <input id="r2" name="rg" type="radio" />
            <label for="r2">Option B</label>
          </p>
        </fieldset>

        <fieldset>
          <legend>√âtat et actions</legend>
          <p>
            <output name="out1">Output: pr√™t</output>
          </p>

          <p>
            <label for="m1">Meter</label>
            <meter id="m1" value="0.6">0.6</meter>
          </p>

          <p>
            <label for="p1">Progress</label>
            <progress id="p1" value="35" max="100">35%</progress>
          </p>

          <p class="form-actions">
            <button type="button">Action secondaire</button>
            <input type="submit" value="Valider" />
            <input type="reset" value="R√©initialiser" />
          </p>
        </fieldset>
      </form>
    </section>
    
    <section id="extended">
  <h2>√âl√©ments HTML √©tendus et rares</h2>

  <article>
    <h3>√âl√©ments de structuration avanc√©e</h3>

    <search>
      <form role="search">
        <label for="q">Recherche</label>
        <input id="q" type="search" name="q" />
        <button type="submit">OK</button>
      </form>
    </search>

    <main hidden>
      <p>main avec attribut hidden</p>
    </main>

    <div>
      <p>div (neutre mais encore n√©cessaire parfois)</p>
    </div>
  </article>

  <article>
    <h3>√âl√©ments li√©s aux Web Components</h3>

    <template id="tpl-card">
      <article>
        <h4>Titre dans template</h4>
        <p>Contenu non rendu tant qu‚Äôil n‚Äôest pas instanci√©.</p>
        <slot name="content"></slot>
      </article>
    </template>

    <p>slot (hors shadow DOM, ici purement d√©monstratif) :</p>
    <slot name="demo-slot">Fallback du slot</slot>
  </article>

  <article>
    <h3>√âl√©ments techniques divers</h3>

    <p>Fallback
      <object data="about:blank" type="text/html">
        <param name="example" value="1" />
        Fallback object.
      </object>
    </p>

    <p>Iframe
      <iframe srcdoc="<p>iframe srcdoc</p>" title="iframe srcdoc"></iframe>
    </p>

    <p>Embed
      <embed src="about:blank" type="text/html" />
    </p>
  </article>

  <article>
    <h3>√âl√©ments peu connus mais valides</h3>

    <p>
      <time datetime="2025-12-23T10:00">Temps lisible - ex: 2025-12-23T10:00</time>
    </p>

    <p>
      <data value="2025">Ann√©e encod√©e ex: 2025 </data>
    </p>

    <p>R√©sultat Calcul√©
      <output name="calc">R√©sultat calcul√©</output>
    </p>
  </article>
</section>


    <section id="tables">
      <h2>Tableaux</h2>
      <p>Exemple de tableau avec en-t√™te lisible, lignes altern√©es et survol pour faciliter la lecture.</p>
      <div class="table-wrap" role="region" aria-label="Tableau de d√©monstration" tabindex="0">
      <table class="demo-table">
        <caption>Horaires de train (exemple)</caption>
        <colgroup>
          <col />
          <col />
          <col />
          <col />
          <col />
        </colgroup>
        <thead>
          <tr>
            <th scope="col">Train</th>
            <th scope="col">D√©part</th>
            <th scope="col">Arriv√©e</th>
            <th scope="col">Voie</th>
            <th scope="col">Statut</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>IC 530</td>
            <td>08:12</td>
            <td>08:47</td>
            <td>5</td>
            <td>√Ä l'heure</td>
          </tr>
          <tr>
            <td>S 2081</td>
            <td>08:25</td>
            <td>08:58</td>
            <td>2</td>
            <td>Retard +4 min</td>
          </tr>
          <tr>
            <td>P 7612</td>
            <td>08:41</td>
            <td>09:16</td>
            <td>7</td>
            <td>√Ä quai</td>
          </tr>
          <tr>
            <td>IC 541</td>
            <td>09:03</td>
            <td>09:39</td>
            <td>1</td>
            <td>Embarquement</td>
          </tr>
        </tbody>
        <tfoot>
          <tr>
            <td colspan="5">4 d√©parts planifi√©s sur la plage 08:00‚Äì09:10</td>
          </tr>
        </tfoot>
      </table>
      </div>
    </section>

    <section id="interactive">
      <h2>Interactif</h2>

      <p>Zone de test interactive: dialog, popover, accordion, √©dition inline et bascule inert.</p>

      <div class="interactive-grid">
        <article class="interactive-panel">
          <h3>Dialog</h3>
          <p>
            <button type="button" id="open-dialog">Ouvrir dialog</button>
            <button type="button" id="close-dialog">Fermer dialog</button>
          </p>
          <dialog id="demo-dialog">
            <p>Dialogue de d√©monstration ouvert avec <code>showModal()</code>.</p>
            <form method="dialog">
              <button type="submit">Fermer</button>
            </form>
          </dialog>
        </article>

        <article class="interactive-panel">
          <h3>Popover</h3>
          <p>
            <button type="button" popovertarget="demo-popover">Ouvrir popover</button>
            <button type="button" popovertarget="demo-popover" popovertargetaction="hide">Masquer popover</button>
          </p>
          <div id="demo-popover" popover>
            <p>Popover natif HTML.</p>
          </div>
        </article>

        <article class="interactive-panel">
          <h3>Details (accordion)</h3>
          <details name="interactive-accordion">
            <summary>Panneau A</summary>
            <p>Contenu du panneau A.</p>
          </details>
          <details name="interactive-accordion">
            <summary>Panneau B</summary>
            <p>Contenu du panneau B.</p>
          </details>
        </article>

        <article class="interactive-panel">
          <h3>Edition Inline</h3>
          <p contenteditable="true" spellcheck="true">Ce texte est editable (contenteditable=true).</p>
        </article>

        <article class="interactive-panel">
          <h3>Toggle Inert</h3>
          <p>
            <button type="button" id="toggle-inert">Basculer inert</button>
          </p>
          <div id="inert-zone">
            <p>Cette zone devient inactive quand <code>inert</code> est actif.</p>
            <button type="button">Bouton test</button>
            <a href="#text">Lien test</a>
          </div>
          <p id="inert-state">Etat: actif</p>
        </article>

        <article class="interactive-panel">
          <h3>Menu</h3>
          <menu>
            <li><button type="button">Action 1</button></li>
            <li><button type="button">Action 2</button></li>
          </menu>
        </article>

        <article class="interactive-panel">
          <h3>Fullscreen API</h3>
          <p>
            <button type="button" id="enter-fullscreen">Entrer en plein ecran</button>
            <button type="button" id="exit-fullscreen">Quitter plein ecran</button>
          </p>
          <div id="fullscreen-target" class="interactive-surface">
            <p>Zone cible pour <code>requestFullscreen()</code>.</p>
          </div>
          <p id="fullscreen-state">Etat: fenetre normale</p>
        </article>

        <article class="interactive-panel">
          <h3>Clipboard API</h3>
          <p>
            <label for="clipboard-text">Texte presse-papiers</label>
            <input id="clipboard-text" type="text" value="DIY CSS clipboard sample" />
          </p>
          <p>
            <button type="button" id="copy-clipboard">Copier</button>
            <button type="button" id="paste-clipboard">Coller</button>
          </p>
          <p id="clipboard-state">Etat: inactif</p>
        </article>

        <article class="interactive-panel">
          <h3>Web Share</h3>
          <p>
            <button type="button" id="share-page">Partager cette page</button>
          </p>
          <p id="share-state">Etat: en attente</p>
        </article>

        <article class="interactive-panel">
          <h3>Drag and Drop</h3>
          <p id="drag-source" draggable="true" class="draggable-chip">Glisser ce bloc</p>
          <div id="drop-target" class="drop-zone">Depose ici</div>
          <p id="drop-state">Etat: rien depose</p>
        </article>
      </div>
    </section>

    <section id="embedded">
      <h2>Contenu embarqu√© / scripting</h2>

      <p>iframe :</p>
      <iframe title="iframe exemple" src="about:blank"></iframe>

      <p>embed (vide) :</p>
      <embed type="text/html" src="about:blank" />

      <p>object (vide) + param :</p>
      <object data="about:blank" type="text/html">
        <param name="foo" value="bar" />
        Fallback object.
      </object>

      <p>map + area :</p>
      <img alt="Image map" width="320" height="120"
           src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='320' height='120'%3E%3Crect width='100%25' height='100%25' fill='%23eee'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-family='sans-serif'%3EImage map%3C/text%3E%3C/svg%3E"
           usemap="#m1" />
      <map name="m1">
        <area shape="rect" coords="0,0,160,120" href="#text" alt="Aller √† Texte" />
        <area shape="rect" coords="160,0,320,120" href="#forms" alt="Aller √† Formulaires" />
      </map>

      <p>noscript :</p>
      <noscript>Ce message s‚Äôaffiche si JavaScript est d√©sactiv√©.</noscript>

      <p>template :</p>
      <template>
        <p>Contenu template non rendu.</p>
      </template>
    </section>
  </main>

  <footer>
    <p><small>Fin de page ‚Äî <time datetime="2025-12-23">23-12-2025</time></small></p>
    <p><small>made with üç´ in Brussels</small></p>
  </footer>

  <script>
    (async () => {
      const root = document.documentElement;
      const uiFamily = document.getElementById("ui-font-family");
      const uiWeight = document.getElementById("ui-font-weight");
      const uiSearch = document.getElementById("ui-font-search");
      const uiSuggestions = document.getElementById("ui-font-suggestions");
      const contentFamily = document.getElementById("content-font-family");
      const contentWeight = document.getElementById("content-font-weight");
      const contentSearch = document.getElementById("content-font-search");
      const contentSuggestions = document.getElementById("content-font-suggestions");
      const aestheticPreset = document.getElementById("aesthetic-preset");
      const uiActive = document.getElementById("ui-font-active");
      const contentActive = document.getElementById("content-font-active");
      const resetFontsButton = document.getElementById("reset-fonts");
      const resetAllTokensButton = document.getElementById("reset-all-tokens");
      const openDialogButton = document.getElementById("open-dialog");
      const closeDialogButton = document.getElementById("close-dialog");
      const demoDialog = document.getElementById("demo-dialog");
      const toggleInertButton = document.getElementById("toggle-inert");
      const inertZone = document.getElementById("inert-zone");
      const inertState = document.getElementById("inert-state");
      const enterFullscreenButton = document.getElementById("enter-fullscreen");
      const exitFullscreenButton = document.getElementById("exit-fullscreen");
      const fullscreenTarget = document.getElementById("fullscreen-target");
      const fullscreenState = document.getElementById("fullscreen-state");
      const clipboardText = document.getElementById("clipboard-text");
      const copyClipboardButton = document.getElementById("copy-clipboard");
      const pasteClipboardButton = document.getElementById("paste-clipboard");
      const clipboardState = document.getElementById("clipboard-state");
      const sharePageButton = document.getElementById("share-page");
      const shareState = document.getElementById("share-state");
      const dragSource = document.getElementById("drag-source");
      const dropTarget = document.getElementById("drop-target");
      const dropState = document.getElementById("drop-state");
      const colorAccent = document.getElementById("color-accent");
      const colorBg = document.getElementById("color-bg");
      const colorSurface = document.getElementById("color-surface");
      const colorSurfaceAlt = document.getElementById("color-surface-alt");
      const colorInk = document.getElementById("color-ink");
      const colorInkSoft = document.getElementById("color-ink-soft");
      const colorLine = document.getElementById("color-line");
      const colorLineStrong = document.getElementById("color-line-strong");
      const colorReset = document.getElementById("color-reset");
      const tokenFontUi = document.getElementById("token-font-ui");
      const tokenFontUiWeight = document.getElementById("token-font-ui-weight");
      const tokenFontContent = document.getElementById("token-font-content");
      const tokenFontContentWeight = document.getElementById("token-font-content-weight");
      const tokenLineHeight = document.getElementById("token-line-height");
      const tokenLetterSpacing = document.getElementById("token-letter-spacing");
      const tokenWordSpacing = document.getElementById("token-word-spacing");
      const applyTypographyTokensButton = document.getElementById("apply-typography-tokens");
      const applyButton = document.getElementById("apply-fonts");
      const themeToggle = document.getElementById("theme-toggle");
      const exportThemeButton = document.getElementById("export-current-theme");
      const catalogStatus = document.getElementById("font-catalog-status");
      const uiLink = document.getElementById("font-ui-link");
      const contentLink = document.getElementById("font-content-link");

      if (!uiFamily || !uiWeight || !uiSearch || !contentFamily || !contentWeight || !contentSearch || !applyButton || !themeToggle || !exportThemeButton || !uiLink || !contentLink) {
        return;
      }

      const allWeights = "100,200,300,400,500,600,700,800,900";
      const defaultFontConfig = {
        ui: { family: "inter", weight: "700" },
        content: { family: "source-serif-4", weight: "400" },
      };
      const buildHref = (slug) =>
        "https://fonts.bunny.net/css?family=" + encodeURIComponent(slug) + ":" + allWeights + "&display=swap";

      const normalizeText = (value) =>
        value
          .toLowerCase()
          .normalize("NFD")
          .replace(/[\u0300-\u036f]/g, "");

      const defaultColorConfig = {
        accent: "#3b63d1",
        bg: "#f6f6f6",
        surface: "#ffffff",
        surfaceAlt: "#fafafa",
        ink: "#1f1f1f",
        inkSoft: "#595959",
        line: "#d4d4d4",
        lineStrong: "#b8b8b8",
      };

      const defaultTypographyConfig = {
        fontUi: '"Inter", "Segoe UI", Arial, sans-serif',
        fontUiWeight: "700",
        fontContent: '"Source Serif 4", Georgia, serif',
        fontContentWeight: "400",
        lineHeight: "1.618",
        letterSpacing: "0.008",
        wordSpacing: "0.03",
      };

      const aestheticPresets = {
        neutral: { accent: "#3b63d1", bg: "#f6f6f6", surface: "#ffffff", ink: "#1f1f1f", line: "#d4d4d4" },
        "editorial-soft": { accent: "#5f6aa8", bg: "#f4f1eb", surface: "#fffdf9", ink: "#2a2926", line: "#d7cec0" },
        "brutalist-bw": { accent: "#101010", bg: "#f1f1f1", surface: "#ffffff", ink: "#0c0c0c", line: "#1c1c1c" },
        "bauhaus-functional": { accent: "#2057bf", bg: "#ece6d8", surface: "#fdf9f0", ink: "#171717", line: "#2c2c2c" },
        "nordic-calm": { accent: "#3d6f8b", bg: "#eef3f5", surface: "#ffffff", ink: "#1f2a31", line: "#c7d5db" },
        "newspaper-classic": { accent: "#4b4a46", bg: "#f5f3ef", surface: "#fffefb", ink: "#1f1d1a", line: "#ccc5ba" },
        "terminal-mono": { accent: "#3b8f5a", bg: "#111316", surface: "#171a1f", ink: "#d5e2da", line: "#2f363f" },
        "warm-paper": { accent: "#9a5a35", bg: "#f6eee2", surface: "#fff9f0", ink: "#2d241c", line: "#d7c3a8" },
        "oceanic-clean": { accent: "#0f6fa1", bg: "#ecf5fa", surface: "#ffffff", ink: "#1a2b36", line: "#bed6e5" },
        "forest-muted": { accent: "#4b6f58", bg: "#eef3ed", surface: "#fbfdfb", ink: "#202920", line: "#c9d6c9" },
        "sunset-soft": { accent: "#d06a4b", bg: "#fef2ea", surface: "#fffaf6", ink: "#2d2220", line: "#e5c6b8" },
        "high-contrast": { accent: "#003cff", bg: "#ffffff", surface: "#ffffff", ink: "#000000", line: "#000000" },
        "retro-console": { accent: "#2ea66f", bg: "#121816", surface: "#18201d", ink: "#d8efe3", line: "#2e413a" },
        "museum-mineral": { accent: "#6f7b88", bg: "#eff2f4", surface: "#fbfcfd", ink: "#23282d", line: "#c9d1d8" },
        "coffee-house": { accent: "#8d5a3b", bg: "#f5eee8", surface: "#fffaf5", ink: "#2e221c", line: "#d8c4b4" },
        "neon-night": { accent: "#4df0d1", bg: "#0f1220", surface: "#171b2b", ink: "#e7efff", line: "#2f3654" },
        "pastel-lab": { accent: "#7d88d9", bg: "#f6f7ff", surface: "#ffffff", ink: "#2b2f47", line: "#d7dcf8" },
        "corporate-blue": { accent: "#1f5fbf", bg: "#eef3fb", surface: "#ffffff", ink: "#1c2a3a", line: "#c7d5ea" },
        "mono-ink": { accent: "#3a3a3a", bg: "#f7f7f7", surface: "#ffffff", ink: "#1b1b1b", line: "#cbcbcb" },
        "amber-ice": { accent: "#cf7a2f", bg: "#eff6fb", surface: "#fffaf3", ink: "#1f2b34", line: "#c7d7e3" },
        "terracotta-mist": { accent: "#b8644a", bg: "#edf4f7", surface: "#fff8f5", ink: "#252c31", line: "#c9d7de" },
        "copper-lagoon": { accent: "#b96b3e", bg: "#e8f4f6", surface: "#fff9f2", ink: "#1d2b2f", line: "#bed2d7" },
        "sun-slate": { accent: "#d28f3b", bg: "#eef2f6", surface: "#fffaf1", ink: "#232a31", line: "#c9d1da" },
        "peach-fjord": { accent: "#d9795f", bg: "#e9f3f9", surface: "#fff8f4", ink: "#20303a", line: "#c4d5e3" },
        "spice-glacier": { accent: "#c26a3b", bg: "#ecf6fa", surface: "#fffaf6", ink: "#1f2c34", line: "#c3d8e4" },
        "canyon-breeze": { accent: "#bf6f45", bg: "#e7f3f5", surface: "#fff8f2", ink: "#213038", line: "#bfd3da" },
      };
      const defaultAestheticPreset = "neutral";

      const clampColor = (value) => {
        const v = Number.isFinite(value) ? value : 0;
        return Math.max(0, Math.min(255, Math.round(v)));
      };

      const shiftHexColor = (hex, ratio) => {
        const cleaned = String(hex || "").trim().replace("#", "");
        const normalized = cleaned.length === 3
          ? cleaned.split("").map((c) => c + c).join("")
          : cleaned;
        if (!/^[0-9a-fA-F]{6}$/.test(normalized)) {
          return hex;
        }

        const r = parseInt(normalized.slice(0, 2), 16);
        const g = parseInt(normalized.slice(2, 4), 16);
        const b = parseInt(normalized.slice(4, 6), 16);

        const adjust = (channel) =>
          ratio >= 0
            ? channel + (255 - channel) * ratio
            : channel * (1 + ratio);

        const toHex = (channel) => clampColor(adjust(channel)).toString(16).padStart(2, "0");

        return "#" + toHex(r) + toHex(g) + toHex(b);
      };

      const restoreSelection = (select, value) => {
        if (!value) {
          return;
        }
        const exists = Array.from(select.options).some((option) => option.value === value);
        if (exists) {
          select.value = value;
        }
      };

      const slugToFamilyName = (slug) =>
        slug
          .split("-")
          .filter(Boolean)
          .map((part) => (part.length ? part[0].toUpperCase() + part.slice(1) : part))
          .join(" ");

      const inferClassFromSlug = (slug) =>
        /(serif|slab|garamond|baskerville|bodoni|mincho|didone|roman|antiqua)/i.test(slug)
          ? "serif"
          : "sans";

      const populateFamilySelect = (select, slugs, fallbackSlug) => {
        const previous = select.value;
        const fragment = document.createDocumentFragment();

        slugs.forEach((slug) => {
          const option = document.createElement("option");
          option.value = slug;
          option.dataset.name = slugToFamilyName(slug);
          option.dataset.class = inferClassFromSlug(slug);
          option.textContent = option.dataset.name;
          fragment.appendChild(option);
        });

        select.replaceChildren(fragment);
        restoreSelection(select, previous);
        if (!select.value && slugs.length > 0) {
          restoreSelection(select, fallbackSlug);
        }
      };

      const loadBunnyCatalog = async () => {
        const response = await fetch("https://fonts.bunny.net/sitemap.xml", { cache: "force-cache" });
        if (!response.ok) {
          throw new Error("Impossible de charger le sitemap Bunny");
        }
        const xmlText = await response.text();
        const xml = new DOMParser().parseFromString(xmlText, "application/xml");
        const locNodes = Array.from(xml.querySelectorAll("url > loc"));

        const slugs = locNodes
          .map((node) => node.textContent || "")
          .map((url) => {
            const match = url.match(/\/family\/([a-z0-9-]+)$/i);
            return match ? match[1].toLowerCase() : "";
          })
          .filter(Boolean);

        return Array.from(new Set(slugs)).sort((a, b) => a.localeCompare(b));
      };

      const filterFamilyOptions = (select, query) => {
        const needle = normalizeText(query.trim());
        const groups = Array.from(select.querySelectorAll("optgroup"));

        if (groups.length === 0) {
          let visibleCount = 0;
          Array.from(select.options).forEach((option) => {
            const haystack = normalizeText([option.textContent || "", option.value || ""].join(" "));
            const visible = needle.length === 0 || haystack.includes(needle);
            option.hidden = !visible;
            if (visible) {
              visibleCount += 1;
            }
          });
          if (visibleCount > 0 && select.options[select.selectedIndex]?.hidden) {
            const fallback = Array.from(select.options).find((option) => !option.hidden);
            if (fallback) {
              select.value = fallback.value;
            }
          }
          return;
        }

        groups.forEach((group) => {
          let visibleCount = 0;
          Array.from(group.querySelectorAll("option")).forEach((option) => {
            const haystack = normalizeText(
              [option.textContent || "", option.dataset.name || "", option.value || "", group.label || ""].join(" ")
            );
            const visible = needle.length === 0 || haystack.includes(needle);
            option.hidden = !visible;
            if (visible) {
              visibleCount += 1;
            }
          });
          group.hidden = visibleCount === 0;
        });

        const selected = select.options[select.selectedIndex];
        if (selected && selected.hidden) {
          const fallback = Array.from(select.options).find((option) => !option.hidden);
          if (fallback) {
            select.value = fallback.value;
          }
        }
      };

      const updateAutocomplete = (select, datalist, query) => {
        if (!datalist) {
          return;
        }

        datalist.replaceChildren();
        const needle = normalizeText(query.trim());
        if (needle.length < 5) {
          return;
        }

        const matches = [];
        Array.from(select.options).forEach((option) => {
          const name = option.dataset.name || option.textContent || "";
          const haystack = normalizeText(name + " " + (option.value || ""));
          if (haystack.includes(needle)) {
            matches.push(name.trim());
          }
        });

        Array.from(new Set(matches)).slice(0, 8).forEach((name) => {
          const opt = document.createElement("option");
          opt.value = name;
          datalist.appendChild(opt);
        });
      };

      const selectExactMatch = (select, query) => {
        const needle = normalizeText(query.trim());
        if (needle.length < 5) {
          return;
        }
        const exact = Array.from(select.options).find((option) => {
          const name = normalizeText((option.dataset.name || option.textContent || "").trim());
          const slug = normalizeText((option.value || "").trim());
          return name === needle || slug === needle;
        });
        if (exact) {
          select.value = exact.value;
        }
      };

      const resetFontsToDefault = () => {
        if (uiSearch) {
          uiSearch.value = "";
        }
        if (contentSearch) {
          contentSearch.value = "";
        }

        filterFamilyOptions(uiFamily, "");
        filterFamilyOptions(contentFamily, "");

        restoreSelection(uiFamily, defaultFontConfig.ui.family);
        restoreSelection(uiWeight, defaultFontConfig.ui.weight);
        restoreSelection(contentFamily, defaultFontConfig.content.family);
        restoreSelection(contentWeight, defaultFontConfig.content.weight);

        if (uiSuggestions) {
          uiSuggestions.replaceChildren();
        }
        if (contentSuggestions) {
          contentSuggestions.replaceChildren();
        }

        applyFontConfig("ui");
        applyFontConfig("content");
      };

      const resetAllTokens = () => {
        localStorage.removeItem("aesthetic-preset");
        localStorage.removeItem("color-config");
        localStorage.removeItem("typography-config");
        localStorage.removeItem("font-ui-config");
        localStorage.removeItem("font-content-config");

        applyAestheticPreset(defaultAestheticPreset);
        applyTypographyConfig(defaultTypographyConfig);
        resetFontsToDefault();
      };

      const applyColorConfig = (config) => {
        const mode = root.getAttribute("data-theme") === "dark" ? "dark" : "light";
        const surfaceAlt = config.surfaceAlt || shiftHexColor(config.surface, mode === "dark" ? 0.08 : -0.03);
        const inkSoft = config.inkSoft || shiftHexColor(config.ink, mode === "dark" ? -0.28 : 0.35);
        const lineStrong = config.lineStrong || shiftHexColor(config.line, mode === "dark" ? 0.25 : -0.15);

        root.style.setProperty("--accent", config.accent);
        root.style.setProperty("--bg", config.bg);
        root.style.setProperty("--surface", config.surface);
        root.style.setProperty("--surface-alt", surfaceAlt);
        root.style.setProperty("--ink", config.ink);
        root.style.setProperty("--ink-soft", inkSoft);
        root.style.setProperty("--line", config.line);
        root.style.setProperty("--line-strong", lineStrong);

        if (colorAccent) {
          colorAccent.value = config.accent;
        }
        if (colorBg) {
          colorBg.value = config.bg;
        }
        if (colorSurface) {
          colorSurface.value = config.surface;
        }
        if (colorSurfaceAlt) {
          colorSurfaceAlt.value = surfaceAlt;
        }
        if (colorInk) {
          colorInk.value = config.ink;
        }
        if (colorInkSoft) {
          colorInkSoft.value = inkSoft;
        }
        if (colorLine) {
          colorLine.value = config.line;
        }
        if (colorLineStrong) {
          colorLineStrong.value = lineStrong;
        }

        localStorage.setItem("color-config", JSON.stringify({
          accent: config.accent,
          bg: config.bg,
          surface: config.surface,
          surfaceAlt,
          ink: config.ink,
          inkSoft,
          line: config.line,
          lineStrong,
        }));
      };

      const applyAestheticPreset = (presetKey) => {
        const key = aestheticPresets[presetKey] ? presetKey : defaultAestheticPreset;
        if (aestheticPreset) {
          aestheticPreset.value = key;
        }
        applyColorConfig(aestheticPresets[key]);
        localStorage.setItem("aesthetic-preset", key);
      };

      const collectColorConfig = () => ({
        accent: colorAccent ? colorAccent.value : defaultColorConfig.accent,
        bg: colorBg ? colorBg.value : defaultColorConfig.bg,
        surface: colorSurface ? colorSurface.value : defaultColorConfig.surface,
        surfaceAlt: colorSurfaceAlt ? colorSurfaceAlt.value : defaultColorConfig.surfaceAlt,
        ink: colorInk ? colorInk.value : defaultColorConfig.ink,
        inkSoft: colorInkSoft ? colorInkSoft.value : defaultColorConfig.inkSoft,
        line: colorLine ? colorLine.value : defaultColorConfig.line,
        lineStrong: colorLineStrong ? colorLineStrong.value : defaultColorConfig.lineStrong,
      });

      const applyTypographyConfig = (config) => {
        const normalized = {
          fontUi: (config.fontUi || defaultTypographyConfig.fontUi).trim(),
          fontUiWeight: String(Math.min(900, Math.max(100, Number(config.fontUiWeight) || Number(defaultTypographyConfig.fontUiWeight)))),
          fontContent: (config.fontContent || defaultTypographyConfig.fontContent).trim(),
          fontContentWeight: String(Math.min(900, Math.max(100, Number(config.fontContentWeight) || Number(defaultTypographyConfig.fontContentWeight)))),
          lineHeight: String(Math.min(2.4, Math.max(1, Number(config.lineHeight) || Number(defaultTypographyConfig.lineHeight)))),
          letterSpacing: String(Math.min(0.2, Math.max(-0.02, Number(config.letterSpacing) || Number(defaultTypographyConfig.letterSpacing)))),
          wordSpacing: String(Math.min(0.4, Math.max(-0.05, Number(config.wordSpacing) || Number(defaultTypographyConfig.wordSpacing)))),
        };

        root.style.setProperty("--font-ui", normalized.fontUi);
        root.style.setProperty("--font-ui-weight", normalized.fontUiWeight);
        root.style.setProperty("--font-content", normalized.fontContent);
        root.style.setProperty("--font-content-weight", normalized.fontContentWeight);
        root.style.setProperty("--content-line-height", normalized.lineHeight);
        root.style.setProperty("--content-letter-spacing", normalized.letterSpacing + "em");
        root.style.setProperty("--content-word-spacing", normalized.wordSpacing + "em");

        if (tokenFontUi) tokenFontUi.value = normalized.fontUi;
        if (tokenFontUiWeight) tokenFontUiWeight.value = normalized.fontUiWeight;
        if (tokenFontContent) tokenFontContent.value = normalized.fontContent;
        if (tokenFontContentWeight) tokenFontContentWeight.value = normalized.fontContentWeight;
        if (tokenLineHeight) tokenLineHeight.value = normalized.lineHeight;
        if (tokenLetterSpacing) tokenLetterSpacing.value = normalized.letterSpacing;
        if (tokenWordSpacing) tokenWordSpacing.value = normalized.wordSpacing;

        localStorage.setItem("typography-config", JSON.stringify(normalized));
      };

      const collectTypographyConfig = () => ({
        fontUi: tokenFontUi ? tokenFontUi.value : defaultTypographyConfig.fontUi,
        fontUiWeight: tokenFontUiWeight ? tokenFontUiWeight.value : defaultTypographyConfig.fontUiWeight,
        fontContent: tokenFontContent ? tokenFontContent.value : defaultTypographyConfig.fontContent,
        fontContentWeight: tokenFontContentWeight ? tokenFontContentWeight.value : defaultTypographyConfig.fontContentWeight,
        lineHeight: tokenLineHeight ? tokenLineHeight.value : defaultTypographyConfig.lineHeight,
        letterSpacing: tokenLetterSpacing ? tokenLetterSpacing.value : defaultTypographyConfig.letterSpacing,
        wordSpacing: tokenWordSpacing ? tokenWordSpacing.value : defaultTypographyConfig.wordSpacing,
      });

      const applyTheme = (mode) => {
        const resolved = mode === "dark" ? "dark" : "light";
        root.setAttribute("data-theme", resolved);
        themeToggle.setAttribute("aria-pressed", resolved === "dark" ? "true" : "false");
        themeToggle.textContent = resolved === "dark" ? "Passer en mode clair" : "Passer en mode fonce";
        localStorage.setItem("theme-mode", resolved);
      };

      const applyFontConfig = (group) => {
        const isUi = group === "ui";
        const familyInput = isUi ? uiFamily : contentFamily;
        const weightInput = isUi ? uiWeight : contentWeight;
        const link = isUi ? uiLink : contentLink;

        const selected = familyInput.options[familyInput.selectedIndex];
        if (!selected) {
          return;
        }
        const slug = familyInput.value;
        const familyName = selected.dataset.name || selected.textContent.trim() || "Inter";
        const familyClass = selected.dataset.class === "serif" ? "serif" : "sans";
        const normalizedWeight = String(Math.min(900, Math.max(100, Number(weightInput.value) || 400)));
        const fallbackStack =
          familyClass === "serif"
            ? '"Times New Roman", Times, serif'
            : '"Helvetica Neue", Arial, sans-serif';

        weightInput.value = normalizedWeight;
        link.href = buildHref(slug);

        root.style.setProperty(
          isUi ? "--font-ui" : "--font-content",
          '"' + familyName.replace(/"/g, "") + '", ' + fallbackStack
        );
        root.style.setProperty(
          isUi ? "--font-ui-weight" : "--font-content-weight",
          normalizedWeight
        );

        if (isUi) {
          if (tokenFontUi) tokenFontUi.value = '"' + familyName.replace(/"/g, "") + '", ' + fallbackStack;
          if (tokenFontUiWeight) tokenFontUiWeight.value = normalizedWeight;
        } else {
          if (tokenFontContent) tokenFontContent.value = '"' + familyName.replace(/"/g, "") + '", ' + fallbackStack;
          if (tokenFontContentWeight) tokenFontContentWeight.value = normalizedWeight;
        }

        const activeTarget = isUi ? uiActive : contentActive;
        if (activeTarget) {
          activeTarget.textContent = "Police active: " + familyName + " (" + normalizedWeight + ")";
        }

        localStorage.setItem(
          isUi ? "font-ui-config" : "font-content-config",
          JSON.stringify({
            family: slug,
            weight: normalizedWeight,
          })
        );
      };

      const uiSaved = JSON.parse(localStorage.getItem("font-ui-config") || "null");
      const contentSaved = JSON.parse(localStorage.getItem("font-content-config") || "null");

      try {
        const bunnySlugs = await loadBunnyCatalog();
        if (bunnySlugs.length > 0) {
          populateFamilySelect(uiFamily, bunnySlugs, "inter");
          populateFamilySelect(contentFamily, bunnySlugs, "source-serif-4");
          if (catalogStatus) {
            catalogStatus.textContent = bunnySlugs.length + " polices disponibles";
          }
        } else if (catalogStatus) {
          catalogStatus.textContent = "Catalogue Bunny vide, liste locale conservee.";
        }
      } catch (error) {
        console.error(error);
        if (catalogStatus) {
          catalogStatus.textContent = "Catalogue Bunny indisponible, liste locale conservee.";
        }
      }

      if (uiSaved) {
        restoreSelection(uiFamily, uiSaved.family);
        restoreSelection(uiWeight, uiSaved.weight);
      } else {
        restoreSelection(uiFamily, defaultFontConfig.ui.family);
        restoreSelection(uiWeight, defaultFontConfig.ui.weight);
      }

      if (contentSaved) {
        restoreSelection(contentFamily, contentSaved.family);
        restoreSelection(contentWeight, contentSaved.weight);
      } else {
        restoreSelection(contentFamily, defaultFontConfig.content.family);
        restoreSelection(contentWeight, defaultFontConfig.content.weight);
      }

      const savedTheme = localStorage.getItem("theme-mode");
      const systemPrefersDark = window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches;
      applyTheme(savedTheme || (systemPrefersDark ? "dark" : "light"));

      const storedPreset = localStorage.getItem("aesthetic-preset");
      const storedColorConfig = JSON.parse(localStorage.getItem("color-config") || "null");
      if (storedPreset && aestheticPresets[storedPreset]) {
        applyAestheticPreset(storedPreset);
      } else {
        applyColorConfig({
          accent: storedColorConfig?.accent || defaultColorConfig.accent,
          bg: storedColorConfig?.bg || defaultColorConfig.bg,
          surface: storedColorConfig?.surface || defaultColorConfig.surface,
          surfaceAlt: storedColorConfig?.surfaceAlt || defaultColorConfig.surfaceAlt,
          ink: storedColorConfig?.ink || defaultColorConfig.ink,
          inkSoft: storedColorConfig?.inkSoft || defaultColorConfig.inkSoft,
          line: storedColorConfig?.line || defaultColorConfig.line,
          lineStrong: storedColorConfig?.lineStrong || defaultColorConfig.lineStrong,
        });
      }

      const storedTypographyConfig = JSON.parse(localStorage.getItem("typography-config") || "null");

      applyButton.addEventListener("click", () => {
        applyFontConfig("ui");
        applyFontConfig("content");
      });

      if (resetFontsButton) {
        resetFontsButton.addEventListener("click", () => {
          resetFontsToDefault();
        });
      }

      if (resetAllTokensButton) {
        resetAllTokensButton.addEventListener("click", () => {
          resetAllTokens();
        });
      }

      if (openDialogButton && demoDialog && typeof demoDialog.showModal === "function") {
        openDialogButton.addEventListener("click", () => {
          if (!demoDialog.open) {
            demoDialog.showModal();
          }
        });
      }

      if (closeDialogButton && demoDialog) {
        closeDialogButton.addEventListener("click", () => {
          if (demoDialog.open) {
            demoDialog.close();
          }
        });
      }

      if (toggleInertButton && inertZone) {
        const updateInertState = () => {
          const isInert = inertZone.hasAttribute("inert");
          if (inertState) {
            inertState.textContent = "Etat: " + (isInert ? "inert actif" : "actif");
          }
        };

        updateInertState();

        toggleInertButton.addEventListener("click", () => {
          if (inertZone.hasAttribute("inert")) {
            inertZone.removeAttribute("inert");
          } else {
            inertZone.setAttribute("inert", "");
          }
          updateInertState();
        });
      }

      if (enterFullscreenButton && fullscreenTarget && typeof fullscreenTarget.requestFullscreen === "function") {
        enterFullscreenButton.addEventListener("click", async () => {
          try {
            await fullscreenTarget.requestFullscreen();
          } catch (error) {
            if (fullscreenState) {
              fullscreenState.textContent = "Etat: echec plein ecran";
            }
          }
        });
      }

      if (exitFullscreenButton && typeof document.exitFullscreen === "function") {
        exitFullscreenButton.addEventListener("click", async () => {
          if (document.fullscreenElement) {
            await document.exitFullscreen();
          }
        });
      }

      if (fullscreenState) {
        document.addEventListener("fullscreenchange", () => {
          const active = document.fullscreenElement ? "plein ecran actif" : "fenetre normale";
          fullscreenState.textContent = "Etat: " + active;
        });
      }

      if (copyClipboardButton && clipboardText) {
        copyClipboardButton.addEventListener("click", async () => {
          try {
            if (!navigator.clipboard || typeof navigator.clipboard.writeText !== "function") {
              throw new Error("Clipboard API indisponible");
            }
            await navigator.clipboard.writeText(clipboardText.value || "");
            if (clipboardState) {
              clipboardState.textContent = "Etat: texte copie";
            }
          } catch (error) {
            if (clipboardState) {
              clipboardState.textContent = "Etat: copie refusee";
            }
          }
        });
      }

      if (pasteClipboardButton && clipboardText) {
        pasteClipboardButton.addEventListener("click", async () => {
          try {
            if (!navigator.clipboard || typeof navigator.clipboard.readText !== "function") {
              throw new Error("Clipboard API indisponible");
            }
            const pasted = await navigator.clipboard.readText();
            clipboardText.value = pasted;
            if (clipboardState) {
              clipboardState.textContent = "Etat: texte colle";
            }
          } catch (error) {
            if (clipboardState) {
              clipboardState.textContent = "Etat: collage refuse";
            }
          }
        });
      }

      if (sharePageButton) {
        sharePageButton.addEventListener("click", async () => {
          try {
            if (!navigator.share) {
              throw new Error("Web Share indisponible");
            }
            await navigator.share({
              title: document.title,
              text: "DIY CSS playground",
              url: location.href,
            });
            if (shareState) {
              shareState.textContent = "Etat: partage envoye";
            }
          } catch (error) {
            if (shareState) {
              shareState.textContent = "Etat: partage annule ou indisponible";
            }
          }
        });
      }

      if (dragSource && dropTarget) {
        dragSource.addEventListener("dragstart", (event) => {
          event.dataTransfer.setData("text/plain", "DIY CSS draggable chip");
          dragSource.classList.add("dragging");
        });

        dragSource.addEventListener("dragend", () => {
          dragSource.classList.remove("dragging");
        });

        dropTarget.addEventListener("dragover", (event) => {
          event.preventDefault();
          dropTarget.classList.add("is-over");
        });

        dropTarget.addEventListener("dragleave", () => {
          dropTarget.classList.remove("is-over");
        });

        dropTarget.addEventListener("drop", (event) => {
          event.preventDefault();
          dropTarget.classList.remove("is-over");
          const payload = event.dataTransfer.getData("text/plain");
          if (dropState) {
            dropState.textContent = "Etat: depose -> " + payload;
          }
        });
      }

      themeToggle.addEventListener("click", () => {
        const current = root.getAttribute("data-theme") === "dark" ? "dark" : "light";
        applyTheme(current === "dark" ? "light" : "dark");
        applyColorConfig(collectColorConfig());
      });

      const extractBaseCssFromLoadedStylesheet = () => {
        const sheets = Array.from(document.styleSheets || []);
        for (const sheet of sheets) {
          const href = sheet.href || "";
          if (!href || !href.includes("style.css")) {
            continue;
          }
          try {
            const rules = Array.from(sheet.cssRules || []);
            if (rules.length > 0) {
              return rules.map((rule) => rule.cssText).join("\n\n");
            }
          } catch (error) {
            // Some environments block direct cssRules access.
          }
        }
        return "";
      };

      exportThemeButton.addEventListener("click", async () => {
        try {
          let baseCss = "";
          try {
            const response = await fetch("style.css", { cache: "no-store" });
            if (response.ok) {
              baseCss = await response.text();
            }
          } catch (error) {
            // Fallback below for local file:// usage.
          }

          if (!baseCss) {
            baseCss = extractBaseCssFromLoadedStylesheet();
          }

          const computed = getComputedStyle(root);
          const vars = [
            "--bg",
            "--surface",
            "--surface-alt",
            "--ink",
            "--ink-soft",
            "--accent",
            "--line",
            "--line-strong",
            "--font-ui",
            "--font-content",
            "--font-ui-weight",
            "--font-content-weight",
            "--radius",
          ];

          const lines = vars.map((name) => "  " + name + ": " + computed.getPropertyValue(name).trim() + ";");
          const mode = root.getAttribute("data-theme") === "dark" ? "dark" : "light";
          const themeBlock =
            "\n\n/* --- Theme current export --- */\n" +
            ":root {\n" + lines.join("\n") + "\n}\n" +
            "/* Theme mode at export: " + mode + " */\n";

          const cssText =
            (baseCss || "/* Base style indisponible en contexte file://. */\n") +
            themeBlock;

          const blob = new Blob([cssText], { type: "text/css;charset=utf-8" });
          const url = URL.createObjectURL(blob);
          const link = document.createElement("a");
          link.href = url;
          link.download = "style-with-theme-current.css";
          document.body.appendChild(link);
          link.click();
          link.remove();
          URL.revokeObjectURL(url);
        } catch (error) {
          console.error(error);
          alert("Export impossible. Ouvre la page via un serveur local (ex: Live Server). ");
        }
      });

      uiFamily.addEventListener("change", () => applyFontConfig("ui"));
      uiWeight.addEventListener("change", () => applyFontConfig("ui"));
      contentFamily.addEventListener("change", () => applyFontConfig("content"));
      contentWeight.addEventListener("change", () => applyFontConfig("content"));

      [colorAccent, colorBg, colorSurface, colorSurfaceAlt, colorInk, colorInkSoft, colorLine, colorLineStrong]
        .filter(Boolean)
        .forEach((input) => {
          input.addEventListener("input", () => applyColorConfig(collectColorConfig()));
        });

      if (applyTypographyTokensButton) {
        applyTypographyTokensButton.addEventListener("click", () => {
          applyTypographyConfig(collectTypographyConfig());
        });
      }

      if (aestheticPreset) {
        aestheticPreset.addEventListener("change", (event) => {
          applyAestheticPreset(event.target.value);
        });
      }

      if (colorReset) {
        colorReset.addEventListener("click", () => applyColorConfig(defaultColorConfig));
      }

      uiSearch.addEventListener("input", (event) => {
        const query = event.target.value;
        updateAutocomplete(uiFamily, uiSuggestions, query);
        filterFamilyOptions(uiFamily, query);
        selectExactMatch(uiFamily, query);
        applyFontConfig("ui");
      });

      contentSearch.addEventListener("input", (event) => {
        const query = event.target.value;
        updateAutocomplete(contentFamily, contentSuggestions, query);
        filterFamilyOptions(contentFamily, query);
        selectExactMatch(contentFamily, query);
        applyFontConfig("content");
      });

      const form = document.querySelector(".font-controls");
      if (form) {
        form.addEventListener("submit", (event) => {
          event.preventDefault();
          applyFontConfig("ui");
          applyFontConfig("content");
        });
      }

      applyFontConfig("ui");
      applyFontConfig("content");

      if (storedTypographyConfig) {
        applyTypographyConfig(storedTypographyConfig);
      }
    })();
  </script>
</body>
</html>
